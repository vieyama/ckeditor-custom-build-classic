/*!
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
window.CKEditor5=window.CKEditor5||{},window.CKEditor5.wordCount=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=6)}([function(t,e){t.exports=CKEditor5.dll},function(t,e,r){t.exports=r(0)("./src/ui.js")},function(t,e,r){t.exports=r(0)("./src/core.js")},function(t,e,r){t.exports=r(0)("./src/utils.js")},function(t,e,r){"use strict";(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.a=r}).call(this,r(5))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";r.r(e),r.d(e,"WordCount",(function(){return Z}));var n=r(2),o=r(1),i=r(3);var u=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},c=r(4),a="object"==typeof self&&self&&self.Object===Object&&self,s=c.a||a||Function("return this")(),f=function(){return s.Date.now()},d=/\s/;var l=function(t){for(var e=t.length;e--&&d.test(t.charAt(e)););return e},h=/^\s+/;var p=function(t){return t?t.slice(0,l(t)+1).replace(h,""):t},g=s.Symbol,v=Object.prototype,b=v.hasOwnProperty,w=v.toString,y=g?g.toStringTag:void 0;var _=function(t){var e=b.call(t,y),r=t[y];try{t[y]=void 0;var n=!0}catch(t){}var o=w.call(t);return n&&(e?t[y]=r:delete t[y]),o},m=Object.prototype.toString;var j=function(t){return m.call(t)},x=g?g.toStringTag:void 0;var O=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":x&&x in Object(t)?_(t):j(t)};var C=function(t){return null!=t&&"object"==typeof t};var S=function(t){return"symbol"==typeof t||C(t)&&"[object Symbol]"==O(t)},T=/^[-+]0x[0-9a-f]+$/i,E=/^0b[01]+$/i,P=/^0o[0-7]+$/i,V=parseInt;var W=function(t){if("number"==typeof t)return t;if(S(t))return NaN;if(u(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=u(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=p(t);var r=E.test(t);return r||P.test(t)?V(t.slice(2),r?2:8):T.test(t)?NaN:+t},M=Math.max,L=Math.min;var N=function(t,e,r){var n,o,i,c,a,s,d=0,l=!1,h=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var r=n,i=o;return n=o=void 0,d=e,c=t.apply(i,r)}function v(t){return d=t,a=setTimeout(w,e),l?g(t):c}function b(t){var r=t-s;return void 0===s||r>=e||r<0||h&&t-d>=i}function w(){var t=f();if(b(t))return y(t);a=setTimeout(w,function(t){var r=e-(t-s);return h?L(r,i-(t-d)):r}(t))}function y(t){return a=void 0,p&&n?g(t):(n=o=void 0,c)}function _(){var t=f(),r=b(t);if(n=arguments,o=this,s=t,r){if(void 0===a)return v(s);if(h)return clearTimeout(a),a=setTimeout(w,e),g(s)}return void 0===a&&(a=setTimeout(w,e)),c}return e=W(e)||0,u(r)&&(l=!!r.leading,i=(h="maxWait"in r)?M(W(r.maxWait)||0,e):i,p="trailing"in r?!!r.trailing:p),_.cancel=function(){void 0!==a&&clearTimeout(a),d=0,n=s=o=a=void 0},_.flush=function(){return void 0===a?c:y(f())},_};var R=function(t,e,r){var n=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return u(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),N(t,e,{leading:n,maxWait:e,trailing:o})};var $=function(t,e){return function(r){return t(e(r))}}(Object.getPrototypeOf,Object),k=Function.prototype,K=Object.prototype,U=k.toString,F=K.hasOwnProperty,A=U.call(Object);var z=function(t){if(!C(t)||"[object Object]"!=O(t))return!1;var e=$(t);if(null===e)return!0;var r=F.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&U.call(r)==A};var D=function(t){return C(t)&&1===t.nodeType&&!z(t)};function I(t){if(t.is("$text")||t.is("$textProxy"))return t.data;let e="",r=null;for(const n of t.getChildren()){const t=I(n);r&&r.is("element")&&(e+="\n"),e+=t,r=n}return e}class Z extends n.Plugin{constructor(t){super(t),this.set("characters",0),this.set("words",0),Object.defineProperties(this,{characters:{get(){return this.characters=this._getCharacters()}},words:{get(){return this.words=this._getWords()}}}),this.set("_wordsLabel"),this.set("_charactersLabel"),this._config=t.config.get("wordCount")||{},this._outputView=void 0,this._wordsMatchRegExp=i.env.features.isRegExpUnicodePropertySupported?new RegExp("([\\p{L}\\p{N}]+\\S?)+","gu"):/([a-zA-Z0-9À-ž]+\S?)+/gu}static get pluginName(){return"WordCount"}init(){this.editor.model.document.on("change:data",R(this._refreshStats.bind(this),250)),"function"==typeof this._config.onUpdate&&this.on("update",(t,e)=>{this._config.onUpdate(e)}),D(this._config.container)&&this._config.container.appendChild(this.wordCountContainer)}destroy(){this._outputView&&(this._outputView.element.remove(),this._outputView.destroy()),super.destroy()}get wordCountContainer(){const t=this.editor,e=t.t,r=t.config.get("wordCount.displayWords"),n=t.config.get("wordCount.displayCharacters"),i=o.Template.bind(this,this),u=[];return this._outputView||(this._outputView=new o.View,(r||void 0===r)&&(this.bind("_wordsLabel").to(this,"words",t=>e("Words: %0",t)),u.push({tag:"div",children:[{text:[i.to("_wordsLabel")]}],attributes:{class:"ck-word-count__words"}})),(n||void 0===n)&&(this.bind("_charactersLabel").to(this,"characters",t=>e("Characters: %0",t)),u.push({tag:"div",children:[{text:[i.to("_charactersLabel")]}],attributes:{class:"ck-word-count__characters"}})),this._outputView.setTemplate({tag:"div",attributes:{class:["ck","ck-word-count"]},children:u}),this._outputView.render()),this._outputView.element}_getCharacters(){return I(this.editor.model.document.getRoot()).replace(/\n/g,"").length}_getWords(){return(I(this.editor.model.document.getRoot()).match(this._wordsMatchRegExp)||[]).length}_refreshStats(){const t=this.words=this._getWords(),e=this.characters=this._getCharacters();this.fire("update",{words:t,characters:e})}}}]);