/*!
 * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
window.CKEditor5=window.CKEditor5||{},window.CKEditor5.findAndReplace=function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=14)}([function(e,t,r){e.exports=r(3)("./src/ui.js")},function(e,t,r){e.exports=r(3)("./src/utils.js")},function(e,t,r){e.exports=r(3)("./src/core.js")},function(e,t){e.exports=CKEditor5.dll},function(e,t,r){"use strict";var i,n=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},o=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),s=[];function c(e){for(var t=-1,r=0;r<s.length;r++)if(s[r].identifier===e){t=r;break}return t}function a(e,t){for(var r={},i=[],n=0;n<e.length;n++){var o=e[n],a=t.base?o[0]+t.base:o[0],l=r[a]||0,d="".concat(a," ").concat(l);r[a]=l+1;var f=c(d),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==f?(s[f].references++,s[f].updater(h)):s.push({identifier:d,updater:m(h,t),references:1}),i.push(d)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var n=r.nc;n&&(i.nonce=n)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var d,f=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function h(e,t,r,i){var n=r?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=f(t,n);else{var o=document.createTextNode(n),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function u(e,t,r){var i=r.css,n=r.media,o=r.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var p=null,k=0;function m(e,t){var r,i,n;if(t.singleton){var o=k++;r=p||(p=l(t)),i=h.bind(null,r,o,!1),n=h.bind(null,r,o,!0)}else r=l(t),i=u.bind(null,r,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var r=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<r.length;i++){var n=c(r[i]);s[n].references--}for(var o=a(e,t),l=0;l<r.length;l++){var d=c(r[l]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}r=o}}}},,function(e,t,r){var i=r(4),n=r(9);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};i(n,o);e.exports=n.locals||{}},function(e,t,r){var i=r(4),n=r(10);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};i(n,o);e.exports=n.locals||{}},function(e,t,r){"use strict";(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.a=r}).call(this,r(11))},function(e,t){e.exports='.ck-vertical-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:var(--ck-spacing-small);bottom:var(--ck-spacing-small);z-index:1}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-text-width)*0.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-large);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after,[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}'},function(e,t){e.exports=".ck .ck-find-and-replace-form .ck-find-form__wrapper,.ck .ck-find-and-replace-form .ck-replace-form__wrapper{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:wrap}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-button,.ck .ck-find-and-replace-form .ck-replace-form__wrapper .ck-button{margin-top:var(--ck-spacing-standard);background-color:var(--ck-color-base-active);padding:5px 10px;text-transform:uppercase}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-button.ck-disabled,.ck .ck-find-and-replace-form .ck-replace-form__wrapper .ck-button.ck-disabled{background-color:var(--ck-color-switch-button-off-background)}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-button:not(.ck-disabled),.ck .ck-find-and-replace-form .ck-replace-form__wrapper .ck-button:not(.ck-disabled){color:var(--ck-color-base-background)}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-button:not(.ck-disabled):hover,.ck .ck-find-and-replace-form .ck-replace-form__wrapper .ck-button:not(.ck-disabled):hover{background-color:var(--ck-color-base-focus);cursor:pointer}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-labeled-field-view__input-wrapper .ck.ck-input-text,.ck .ck-find-and-replace-form .ck-replace-form__wrapper .ck-labeled-field-view__input-wrapper .ck.ck-input-text{padding:var(--ck-spacing-extra-tiny) calc(var(--ck-spacing-medium)*8) var(--ck-spacing-extra-tiny) var(--ck-spacing-medium)}@media screen and (max-width:600px){.ck .ck-find-and-replace-form .ck-find-form__wrapper,.ck .ck-find-and-replace-form .ck-replace-form__wrapper{flex-wrap:wrap}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-labeled-field-view,.ck .ck-find-and-replace-form .ck-replace-form__wrapper .ck-labeled-field-view{flex-basis:100%}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-button,.ck .ck-find-and-replace-form .ck-replace-form__wrapper .ck-button{flex-basis:50%}}.ck .ck-find-and-replace-form .ck-replace-form__wrapper{justify-content:flex-end;border-top:1px solid var(--ck-color-base-border)}.ck .ck-find-and-replace-form .ck-replace-form__wrapper .ck-labeled-field-view__input-wrapper .ck.ck-input-text{padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium) var(--ck-spacing-extra-tiny) var(--ck-spacing-medium)}.ck .ck-find-and-replace-form .ck-replace-form__wrapper .ck-button{border-radius:5px;font-size:calc(var(--ck-font-size-normal)*0.9)}.ck .ck-find-and-replace-form .ck-replace-form__wrapper .ck-button:last-child{margin-left:var(--ck-spacing-standard)}.ck .ck-find-and-replace-form .ck-replace-form__wrapper .ck-button .ck.ck-button__label{line-height:20px}.ck .ck-find-and-replace-form .ck-find-form__wrapper{justify-content:space-between}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-button.ck-button-next,.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-button.ck-button-prev{margin-left:1px}.ck .ck-find-and-replace-form .ck-find-form__wrapper span.ck-results-counter{position:absolute;top:calc(var(--ck-spacing-standard)*2);right:calc(var(--ck-spacing-standard)*3);color:var(--ck-color-base-border)}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-find-buttons{display:flex;align-items:center}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-find-buttons .ck-button{border-radius:5px;padding:5px}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-find-buttons .ck-button svg.ck-button__icon{margin:0}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-find-buttons .ck-button.ck-button-find{padding:4px 16px}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-find-buttons .ck-button.ck-button-prev{border-radius:5px 0 0 5px}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-find-buttons .ck-button.ck-button-prev svg{transform:rotate(180deg) translateY(-2px)}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-find-buttons .ck-button.ck-button-next{border-radius:0 5px 5px 0}.ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-find-buttons .ck-button.ck-button-next svg{transform:translateY(-1px)}.ck .ck-find-and-replace-form .ck-find-form__wrapper.ck-is-searching .ck-button.ck-button-find,.ck .ck-find-and-replace-form .ck-find-form__wrapper:not(.ck-is-searching) .ck-button.ck-button-next,.ck .ck-find-and-replace-form .ck-find-form__wrapper:not(.ck-is-searching) .ck-button.ck-button-prev{display:none}.ck .ck-find-and-replace-form .ck-find-form__wrapper:not(.ck-is-searching) .ck-button.ck-button-find{display:flex}.ck .ck-find-and-replace-form .ck-find-form__wrapper.ck-responsive-form .ck-find-checkboxes{margin:0}.ck .ck-find-and-replace-form .ck-find-form__wrapper.ck-responsive-form .ck-find-checkboxes .ck-find-checkboxes__box{display:flex;align-items:center;max-width:150px;overflow:hidden}.ck .ck-find-and-replace-form .ck-find-form__wrapper.ck-responsive-form .ck-find-checkboxes .ck-find-checkboxes__box label{margin-left:5px;line-height:calc(var(--ck-spacing-standard)*2.2);overflow:hidden;text-overflow:ellipsis}.ck .ck-find-and-replace-form .ck-find-form__wrapper.ck-responsive-form .ck-find-checkboxes .ck-find-checkboxes__box input[type=checkbox]:hover,.ck .ck-find-and-replace-form .ck-find-form__wrapper.ck-responsive-form .ck-find-checkboxes .ck-find-checkboxes__box label:hover{cursor:pointer}.ck .ck-find-and-replace-form .ck-find-form__wrapper.ck-responsive-form .ck-find-checkboxes .ck-find-checkboxes__box:first-child{margin-top:var(--ck-spacing-medium)}.ck .ck-find-and-replace-form .ck-find-form__wrapper.ck-responsive-form .ck-find-checkboxes .ck-find-checkboxes__box input[type=checkbox]:disabled+label{color:var(--ck-color-switch-button-off-background)}.ck[dir=rtl] .ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-labeled-field-view__input-wrapper .ck.ck-input-text{padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium) var(--ck-spacing-extra-tiny) calc(var(--ck-spacing-medium)*8)}.ck[dir=rtl] .ck .ck-find-and-replace-form .ck-replace-form__wrapper .ck-replace-buttons{display:flex;flex-flow:row-reverse}.ck[dir=rtl] .ck .ck-find-and-replace-form .ck-replace-form__wrapper .ck-replace-buttons .ck-button:last-child{margin-left:var(--ck-spacing-standard)}.ck[dir=rtl] .ck .ck-find-and-replace-form .ck-replace-form__wrapper .ck-labeled-field-view__input-wrapper .ck.ck-input-text{padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium)}.ck[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:0}.ck[dir=rtl] .ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-button.ck-button-next,.ck[dir=rtl] .ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-button.ck-button-prev{margin-right:1px;margin-left:0}.ck[dir=rtl] .ck .ck-find-and-replace-form .ck-find-form__wrapper span.ck-results-counter{left:calc(var(--ck-spacing-standard)*3)}.ck[dir=rtl] .ck .ck-find-and-replace-form .ck-find-form__wrapper .ck-find-buttons{flex-flow:row-reverse}.ck[dir=rtl] .ck .ck-find-and-replace-form .ck-find-form__wrapper.ck-responsive-form .ck-find-checkboxes{margin:0}.ck[dir=rtl] .ck .ck-find-and-replace-form .ck-find-form__wrapper.ck-responsive-form .ck-find-checkboxes .ck-find-checkboxes__box label{margin-right:5px}"},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var i=r(4),n=r(13);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var o={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};i(n,o);e.exports=n.locals||{}},function(e,t){e.exports=".ck-find-result{background:#fff700;color:var(--ck-color-text)}.ck-find-result_selected{background:#fd0}"},function(e,t,r){"use strict";r.r(t),r.d(t,"FindAndReplace",(function(){return Be}));var i=r(2),n=r(0),o=r(1),s=(r(6),r(7),'<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>');class c extends n.View{constructor(e){super(e);const t=this.bindTemplate;this.set("class"),this.set("isEnabled",!0),this.set("isVisible",!0),this.set("isChecked",!1),this.set("label"),this.set("id",null),this.set("tabindex",-1),this.children=this.createCollection(),this.labelView=this._createLabelView(),this.checkboxInputView=this._createCheckboxInputView(),this.setTemplate({tag:"div",attributes:{class:[t.to("class"),t.if("isEnabled","ck-disabled",e=>!e),t.if("isVisible","ck-hidden",e=>!e)],tabindex:t.to("tabindex")},on:{keydown:t.to(e=>{e.target===this.element&&e.keyCode==Object(o.getCode)("space")&&(this.isChecked=!this.isChecked)})},children:this.children})}render(){super.render(),this.children.add(this.checkboxInputView),this.children.add(this.labelView)}focus(){this.element.focus()}_createCheckboxInputView(){const e=new n.View,t=this.bindTemplate;return e.setTemplate({tag:"input",attributes:{type:"checkbox",id:t.to("id"),checked:t.if("isChecked"),disabled:t.if("isEnabled",!0,e=>!e),"aria-disabled":t.if("isEnabled",!0,e=>!e)},on:{change:t.to(e=>{this.isChecked=e.target.checked})}}),e}_createLabelView(){const e=new n.View;return e.setTemplate({tag:"label",attributes:{for:this.bindTemplate.to("id")},children:[{text:this.bindTemplate.to("label")}]}),e}}class a extends n.View{constructor(e,t){super(e);const r=e.t;function i(e){return void 0===e?"":e}this.set("isSearching",!1),this.set("searchText",""),this.set("replaceText",""),this.set("isDirty",!1),this.set("matchCase",!1),this.set("matchWholeWords",!1),this.set("matchCount",null),this.set("highlightOffset",null),this.set("isCounterHidden",!0),this._assignViews(r),this._initFocusables(),this.bind("isDirty").to(this,"searchText",t,"searchText",this.matchCaseView,"isChecked",t,"matchCase",this.matchWholeWordsView,"isChecked",t,"matchWholeWords",(e,t,r,i,n,o)=>e!==t||r!==i||n!==o),this.bind("searchText").to(this.findInputView.fieldView,"value",i),this.findButtonView.bind("isEnabled").to(this.findInputView.fieldView,"isEmpty",e=>!e),this.bind("replaceText").to(this.replaceInputView.fieldView,"value",i),this.replaceButtonView.bind("isEnabled").to(this,"isSearching"),this.replaceAllButtonView.bind("isEnabled").to(this,"isSearching"),this.bind("isCounterHidden").to(t,"searchText",this,"isDirty",(e,t)=>""==e||t),this.bind("isSearching").to(this,"matchCount",this,"isDirty",(e,t)=>e>0&&!t),this.setTemplate({tag:"form",attributes:{class:["ck","ck-find-and-replace-form"]},children:[this.findView,this.replaceView]}),Object(n.injectCssTransitionDisabler)(this)}render(){super.render(),Object(n.submitHandler)({view:this});[this.findInputView,this.matchCaseView,this.matchWholeWordsView,this.findButtonView,this.findPrevButtonView,this.findNextButtonView,this.replaceInputView,this.replaceAllButtonView,this.replaceButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element);const e=e=>e.stopPropagation(),t=e=>{e.stopPropagation(),e.preventDefault()};this.keystrokes.set("f3",e=>{t(e),this.findNextButtonView.fire("execute")}),this.keystrokes.set("shift+f3",e=>{t(e),this.findPrevButtonView.fire("execute")}),this.keystrokes.set("enter",e=>{const r=e.target;r.classList.contains("ck-input-text")&&(r.parentElement.parentElement.parentElement.classList.contains("ck-find-form__wrapper")&&this.findButtonView.isEnabled?(this.findButtonView.fire("execute"),t(e)):r.parentElement.parentElement.parentElement.classList.contains("ck-replace-form__wrapper")&&this.replaceButtonView.isEnabled&&(this.replaceButtonView.fire("execute"),t(e)))}),this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e),this.listenTo(this.findInputView.element,"selectstart",(e,t)=>{t.stopPropagation()},{priority:"high"}),this.listenTo(this.replaceInputView.element,"selectstart",(e,t)=>{t.stopPropagation()},{priority:"high"})}focus(){this._focusCycler.focusFirst()}_initFocusables(){this.focusTracker=new o.FocusTracker,this.keystrokes=new o.KeystrokeHandler,this._focusables=new n.ViewCollection,this._focusCycler=new n.FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}})}_assignViews(e){this.findInputView=this._createInputField(e("Find in text…")),this.findButtonView=this._createButton(e("Find"),"ck-button-find"),this.findButtonView.on("execute",()=>{this.fire("findNext",{searchText:this.searchText,matchCase:this.matchCaseView.isChecked,wholeWords:this.matchWholeWordsView.isChecked})}),this.findPrevButtonView=this._createButton(e("Previous result"),"ck-button-prev",s,!1),this.findPrevButtonView.on("execute",()=>{this.fire("findPrevious")}),this.findNextButtonView=this._createButton(e("Next result"),"ck-button-next",s,!1),this.findNextButtonView.on("execute",()=>{this.fire("findNext")}),this.replaceButtonView=this._createButton(e("Replace"),"ck-button-replace"),this.replaceButtonView.on("execute",()=>{this.fire("replace",{searchText:this.searchText,replaceText:this.replaceText})}),this.replaceAllButtonView=this._createButton(e("Replace all"),"ck-button-replaceall"),this.replaceAllButtonView.on("execute",()=>{this.fire("replaceAll",{searchText:this.searchText,replaceText:this.replaceText})}),this.matchCaseView=this._createCheckbox(e("Match case")),this.matchWholeWordsView=this._createCheckbox(e("Whole words only")),this.replaceInputView=this._createInputField(e("Replace with…")),this.findView=this._createFindView(),this.replaceView=this._createReplaceView()}_createFindView(){const e=new n.View,t=this.bindTemplate,r=this.locale.t;return e.setTemplate({tag:"div",attributes:{class:["ck","ck-find-form__wrapper","ck-responsive-form",t.if("isSearching","ck-is-searching")],tabindex:"-1"},children:[this.findInputView,{tag:"span",attributes:{class:["ck-results-counter",t.if("isCounterHidden","ck-hidden")]},children:[{text:t.to("highlightOffset",e=>e||0)},r(" of "),{text:t.to("matchCount")}]},{tag:"div",attributes:{class:["ck-find-checkboxes"]},children:[this.matchCaseView,this.matchWholeWordsView]},{tag:"div",attributes:{class:["ck-find-buttons"]},children:[this.findButtonView,this.findPrevButtonView,this.findNextButtonView]}]}),e}_createReplaceView(){const e=new n.View,t=this.bindTemplate;return e.setTemplate({tag:"div",attributes:{class:["ck","ck-replace-form__wrapper","ck-responsive-form",t.if("isSearching","ck-is-searching")],tabindex:"-1"},children:[this.replaceInputView,{tag:"div",attributes:{class:["ck-replace-buttons"]},children:[this.replaceAllButtonView,this.replaceButtonView]}]}),e}_createInputField(e){const t=new n.LabeledFieldView(this.locale,n.createLabeledInputText),r=t.fieldView;return r.on("input",()=>{r.value=r.element.value}),t.label=e,t.render(),t}_createButton(e,t,r,i=!0){const o=new n.ButtonView(this.locale);return o.set({label:e,icon:r,withText:i}),o.extendTemplate({attributes:{class:t}}),o}_createCheckbox(e){const t=new c(this.locale);return t.set({isVisible:!0,tooltip:!0,class:"ck-find-checkboxes__box",id:Object(o.uid)(),label:e}),t}}class l extends i.Plugin{static get pluginName(){return"FindAndReplaceUI"}constructor(e){super(e),this.set("searchText"),this.set("replaceText"),this.set("matchCount",null),this.set("highlightOffset",null),this.formView=null}init(){this.findAndReplacePlugin=this.editor.plugins.get("FindAndReplace");const e=this.editor;e.ui.componentFactory.add("findAndReplace",t=>{const r=Object(n.createDropdown)(t),i=new a(e.locale,this._state);return i.delegate("findNext").to(this),i.delegate("findPrevious").to(this),i.delegate("replace").to(this),i.delegate("replaceAll").to(this),i.bind("matchCount").to(this),i.bind("highlightOffset").to(this),this._createToolbarDropdown(r,'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 13.786 1.532-1.286 3.857 4.596a1 1 0 1 1-1.532 1.286l-3.857-4.596z"/><path d="M16.004 8.5a6.5 6.5 0 0 1-9.216 5.905c-1.154-.53-.863-1.415-.663-1.615.194-.194.564-.592 1.635-.141a4.5 4.5 0 0 0 5.89-5.904l-.104-.227 1.332-1.331c.045-.046.196-.041.224.007a6.47 6.47 0 0 1 .902 3.306zm-3.4-5.715c.562.305.742 1.106.354 1.494-.388.388-.995.414-1.476.178a4.5 4.5 0 0 0-6.086 5.882l.114.236-1.348 1.349c-.038.037-.17.022-.198-.023a6.5 6.5 0 0 1 5.54-9.9 6.469 6.469 0 0 1 3.1.784z"/><path d="M4.001 11.93.948 8.877a.2.2 0 0 1 .141-.341h6.106a.2.2 0 0 1 .141.341L4.283 11.93a.2.2 0 0 1-.282 0zm11.083-6.789 3.053 3.053a.2.2 0 0 1-.14.342H11.89a.2.2 0 0 1-.14-.342l3.052-3.053a.2.2 0 0 1 .282 0z"/></svg>',i),r.panelView.children.add(i),r.on("change:isOpen",(e,t,r)=>{r||this.fire("dropdown:closed")}),this.formView=i,e.keystrokes.set("Ctrl+F",(e,t)=>{r.buttonView.fire("execute"),t()}),r.bind("isEnabled").to(e.commands.get("find")),r})}_setState(e){this._state=e,this.listenTo(e.results,"change",()=>{this.set("matchCount",e.results.length)}),this.bind("highlightOffset").to(e,"highlightedResult",t=>{if(!t)return null;const r=Array.from(e.results).sort((e,t)=>({before:-1,same:0,after:1}[e.marker.getStart().compareWith(t.marker.getStart())])).indexOf(t);return-1===r?null:r+1})}_createToolbarDropdown(e,t,r){const i=this.editor.locale.t,n=e.buttonView;n.set({icon:t,label:i("Find and replace"),keystroke:"CTRL+F",tooltip:!0}),n.on("open",()=>{r.disableCssTransitions(),r.findInputView.fieldView.select(),r.focus(),r.enableCssTransitions()},{priority:"low"})}}var d=r(8),f="object"==typeof self&&self&&self.Object===Object&&self,h=d.a||f||Function("return this")(),u=h.Symbol;var p=function(e,t){for(var r=-1,i=null==e?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n},k=Array.isArray,m=Object.prototype,g=m.hasOwnProperty,b=m.toString,w=u?u.toStringTag:void 0;var v=function(e){var t=g.call(e,w),r=e[w];try{e[w]=void 0;var i=!0}catch(e){}var n=b.call(e);return i&&(t?e[w]=r:delete e[w]),n},x=Object.prototype.toString;var _=function(e){return x.call(e)},y=u?u.toStringTag:void 0;var T=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":y&&y in Object(e)?v(e):_(e)};var V=function(e){return null!=e&&"object"==typeof e};var C=function(e){return"symbol"==typeof e||V(e)&&"[object Symbol]"==T(e)},R=u?u.prototype:void 0,E=R?R.toString:void 0;var I=function e(t){if("string"==typeof t)return t;if(k(t))return p(t,e)+"";if(C(t))return E?E.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r};var B=function(e){return null==e?"":I(e)},j=/[\\^$.*+?()[\]{}|]/g,A=RegExp(j.source);var O=function(e){return(e=B(e))&&A.test(e)?e.replace(j,"\\$&"):e};function N(e,t,r,i){const n=i||new o.Collection;return[...e].forEach(({type:e,item:i})=>{if("elementStart"===e&&t.schema.checkChild(i,"$text")){const e=r({item:i,text:S(t.createRangeIn(i))});if(!e)return;e.forEach(e=>{t.change(t=>{const r="findResult:"+Object(o.uid)(),s=t.addMarker(r,{usingOperation:!1,affectsData:!1,range:t.createRange(t.createPositionAt(i,e.start),t.createPositionAt(i,e.end))}),c=function(e,t){const r=e.find(({marker:e})=>t.getStart().isBefore(e.getStart()));return r?e.getIndex(r):e.length}(n,s);n.add({id:r,label:e.label,marker:s},c)})})}}),n}function S(e){return Array.from(e.getItems()).reduce((e,t)=>t.is("text")||t.is("textProxy")?e+t.data:e+"\n","")}function M(e){const t=e.length-1;let r=e.index;return 3===e.length&&(r+=e[1].length),{label:e[t],start:r,end:r+e[t].length}}function P(e,t){let r="gu";t.matchCase||(r+="i");let i=`(${O(e)})`;if(t.wholeWords){const e="[^a-zA-ZÀ-ɏḀ-ỿ]";i=`(^|${e}|_)`+i+`(?:_|${e}|$)`}const n=new RegExp(i,r);return function({text:e}){return[...e.matchAll(n)].map(M)}}class W extends i.Command{constructor(e,t){super(e),this.isEnabled=!0,this.state=t,this.listenTo(e,"change:isReadOnly",(e,t,r)=>{r&&this.clearForceDisabled("readOnlyMode")})}execute(e,{matchCase:t,wholeWords:r}={}){const{editor:i}=this,{model:n}=i;let o;"string"==typeof e?(o=P(e,{matchCase:t,wholeWords:r}),this.state.searchText=e):o=e;const s=n.document.getRootNames().reduce((e,t)=>N(n.createRangeIn(n.document.getRoot(t)),n,o,e),null);return this.state.clear(n),this.state.results.addMany(Array.from(s)),this.state.highlightedResult=s.get(0),"string"==typeof e&&(this.state.searchText=e),this.state.matchCase=!!t,this.state.matchWholeWords=!!r,{results:s,findCallback:o}}}class F extends i.Command{constructor(e,t){super(e),this.isEnabled=!0,this._state=t}execute(e,t){const{model:r}=this.editor;r.change(i=>{const n=t.marker.getRange();let o={};for(const e of n.getItems())if(e.is("$text")||e.is("$textProxy")){o=e.getAttributes();break}r.insertContent(i.createText(e,o),n),this._state.results.has(t)&&this._state.results.remove(t)})}}class D extends F{execute(e,t){const{editor:r}=this,{model:i}=r,n=t instanceof o.Collection?t:i.document.getRootNames().reduce((e,r)=>N(i.createRangeIn(i.document.getRoot(r)),i,P(t,this._state),e),null);n.length&&i.change(()=>{[...n].forEach(t=>{super.execute(e,t)})})}}class H extends i.Command{constructor(e,t){super(e),this._state=t,this.isEnabled=!1,this.listenTo(this._state.results,"change",()=>{this.isEnabled=this._state.results.length>1}),this.listenTo(e,"change:isReadOnly",(e,t,r)=>{r&&this.clearForceDisabled("readOnlyMode")})}refresh(){this.isEnabled=this._state.results.length>1}execute(){const e=this._state.results,t=e.getIndex(this._state.highlightedResult),r=t+1>=e.length?0:t+1;this._state.highlightedResult=this._state.results.get(r)}}class L extends H{execute(){const e=this._state.results.getIndex(this._state.highlightedResult),t=e-1<0?this._state.results.length-1:e-1;this._state.highlightedResult=this._state.results.get(t)}}class ${constructor(e){this.set("results",new o.Collection),this.set("highlightedResult",null),this.set("searchText",""),this.set("replaceText",""),this.set("matchCase",!1),this.set("matchWholeWords",!1),this.results.on("change",(t,{removed:r,index:i})=>{if((r=Array.from(r)).length){let t=!1;if(e.change(i=>{for(const n of r)this.highlightedResult===n&&(t=!0),e.markers.has(n.marker.name)&&i.removeMarker(n.marker)}),t){const e=i>=this.results.length?0:i;this.highlightedResult=this.results.get(e)}}})}clear(e){this.searchText="",e.change(t=>{if(this.highlightedResult){const r=this.highlightedResult.marker.name.split(":")[1],i=e.markers.get("findResultHighlighted:"+r);i&&t.removeMarker(i)}[...this.results].forEach(({marker:e})=>{t.removeMarker(e)})}),this.results.clear()}}function z(e){return"[object Range]"==Object.prototype.toString.apply(e)}function Y(e){const t=Object.prototype.toString.apply(e);return"[object Window]"==t||"[object global]"==t}function K(e){return"[object Text]"==Object.prototype.toString.call(e)}Object(o.mix)($,o.ObservableMixin);var U=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object),q=Function.prototype,G=Object.prototype,J=q.toString,X=G.hasOwnProperty,Z=J.call(Object);var Q=function(e){if(!V(e)||"[object Object]"!=T(e))return!1;var t=U(e);if(null===t)return!0;var r=X.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&J.call(r)==Z};var ee=function(e){return V(e)&&1===e.nodeType&&!Q(e)};const te=["top","right","bottom","left","width","height"];class re{constructor(e){const t=z(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),ee(e)||t)if(t){const t=re.getDomRangeRects(e);ie(this,re.getBoundingRect(t))}else ie(this,e.getBoundingClientRect());else if(Y(e)){const{innerWidth:t,innerHeight:r}=e;ie(this,{top:0,right:t,bottom:r,left:0,width:t,height:r})}else ie(this,e)}clone(){return new re(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left)};return t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0?null:new re(t)}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(!ne(e)){let r=e.parentNode||e.commonAncestorContainer;for(;r&&!ne(r);){const e=new re(r),i=t.getIntersection(e);if(!i)return null;i.getArea()<t.getArea()&&(t=i),r=r.parentNode}}return t}isEqual(e){for(const t of te)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!(!t||!t.isEqual(e))}excludeScrollbarsAndBorders(){const e=this._source;let t,r,i;if(Y(e))t=e.innerWidth-e.document.documentElement.clientWidth,r=e.innerHeight-e.document.documentElement.clientHeight,i=e.getComputedStyle(e.document.documentElement).direction;else{const n=function(e){const t=e.ownerDocument.defaultView.getComputedStyle(e);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)}}(this._source);t=e.offsetWidth-e.clientWidth-n.left-n.right,r=e.offsetHeight-e.clientHeight-n.top-n.bottom,i=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=n.left,this.top+=n.top,this.right-=n.right,this.bottom-=n.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,"ltr"===i?this.right-=t:this.left+=t,this.height-=r,this.bottom-=r,this}static getDomRangeRects(e){const t=[],r=Array.from(e.getClientRects());if(r.length)for(const e of r)t.push(new re(e));else{let r=e.startContainer;K(r)&&(r=r.parentNode);const i=new re(r.getBoundingClientRect());i.right=i.left,i.width=0,t.push(i)}return t}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY};let r=0;for(const i of e)r++,t.left=Math.min(t.left,i.left),t.top=Math.min(t.top,i.top),t.right=Math.max(t.right,i.right),t.bottom=Math.max(t.bottom,i.bottom);return 0==r?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new re(t))}}function ie(e,t){for(const r of te)e[r]=t[r]}function ne(e){return!!ee(e)&&e===e.ownerDocument.body}function oe({target:e,viewportOffset:t=0}){const r=he(e);let i=r,n=null;for(;i;){let o;o=ue(i==r?e:n),ce(o,()=>pe(e,i));const s=pe(e,i);if(se(i,s,t),i.parent!=i){if(n=i.frameElement,i=i.parent,!n)return}else i=null}}function se(e,t,r){const i=t.clone().moveBy(0,r),n=t.clone().moveBy(0,-r),o=new re(e).excludeScrollbarsAndBorders();if(![n,i].every(e=>o.contains(e))){let{scrollX:s,scrollY:c}=e;le(n,o)?c-=o.top-t.top+r:ae(i,o)&&(c+=t.bottom-o.bottom+r),de(t,o)?s-=o.left-t.left+r:fe(t,o)&&(s+=t.right-o.right+r),e.scrollTo(s,c)}}function ce(e,t){const r=he(e);let i,n;for(;e!=r.document.body;)n=t(),i=new re(e).excludeScrollbarsAndBorders(),i.contains(n)||(le(n,i)?e.scrollTop-=i.top-n.top:ae(n,i)&&(e.scrollTop+=n.bottom-i.bottom),de(n,i)?e.scrollLeft-=i.left-n.left:fe(n,i)&&(e.scrollLeft+=n.right-i.right)),e=e.parentNode}function ae(e,t){return e.bottom>t.bottom}function le(e,t){return e.top<t.top}function de(e,t){return e.left<t.left}function fe(e,t){return e.right>t.right}function he(e){return z(e)?e.startContainer.ownerDocument.defaultView:e.ownerDocument.defaultView}function ue(e){if(z(e)){let t=e.commonAncestorContainer;return K(t)&&(t=t.parentNode),t}return e.parentNode}function pe(e,t){const r=he(e),i=new re(e);if(r===t)return i;{let e=r;for(;e!=t;){const t=e.frameElement,r=new re(t).excludeScrollbarsAndBorders();i.moveBy(r.left,r.top),e=e.parent}}return i}Object.assign({},{scrollViewportToShowTarget:oe,scrollAncestorsToShowTarget:function(e){ce(ue(e),()=>new re(e))}});var ke=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},me=function(){return h.Date.now()},ge=/\s/;var be=function(e){for(var t=e.length;t--&&ge.test(e.charAt(t)););return t},we=/^\s+/;var ve=function(e){return e?e.slice(0,be(e)+1).replace(we,""):e},xe=/^[-+]0x[0-9a-f]+$/i,_e=/^0b[01]+$/i,ye=/^0o[0-7]+$/i,Te=parseInt;var Ve=function(e){if("number"==typeof e)return e;if(C(e))return NaN;if(ke(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ke(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=ve(e);var r=_e.test(e);return r||ye.test(e)?Te(e.slice(2),r?2:8):xe.test(e)?NaN:+e},Ce=Math.max,Re=Math.min;var Ee=function(e,t,r){var i,n,o,s,c,a,l=0,d=!1,f=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function u(t){var r=i,o=n;return i=n=void 0,l=t,s=e.apply(o,r)}function p(e){return l=e,c=setTimeout(m,t),d?u(e):s}function k(e){var r=e-a;return void 0===a||r>=t||r<0||f&&e-l>=o}function m(){var e=me();if(k(e))return g(e);c=setTimeout(m,function(e){var r=t-(e-a);return f?Re(r,o-(e-l)):r}(e))}function g(e){return c=void 0,h&&i?u(e):(i=n=void 0,s)}function b(){var e=me(),r=k(e);if(i=arguments,n=this,a=e,r){if(void 0===c)return p(a);if(f)return clearTimeout(c),c=setTimeout(m,t),u(a)}return void 0===c&&(c=setTimeout(m,t)),s}return t=Ve(t)||0,ke(r)&&(d=!!r.leading,o=(f="maxWait"in r)?Ce(Ve(r.maxWait)||0,t):o,h="trailing"in r?!!r.trailing:h),b.cancel=function(){void 0!==c&&clearTimeout(c),l=0,i=a=n=c=void 0},b.flush=function(){return void 0===c?s:g(me())},b};r(12);class Ie extends i.Plugin{static get pluginName(){return"FindAndReplaceEditing"}init(){this.activeResults=null,this.state=new $(this.editor.model),this._defineConverters(),this._defineCommands(),this.listenTo(this.state,"change:highlightedResult",(e,t,r,i)=>{const{model:n}=this.editor;n.change(e=>{if(i){const t=i.marker.name.split(":")[1],r=n.markers.get("findResultHighlighted:"+t);r&&e.removeMarker(r)}if(r){const t=r.marker.name.split(":")[1];e.addMarker("findResultHighlighted:"+t,{usingOperation:!1,affectsData:!1,range:r.marker.getRange()})}})});const e=Ee(function(e,t,r){if(r){const e=this.editor.editing.view.domConverter,t=this.editor.editing.mapper.toViewRange(r.marker.getRange());oe({target:e.viewRangeToDom(t),viewportOffset:40})}}.bind(this),32);this.listenTo(this.state,"change:highlightedResult",e,{priority:"low"}),this.listenTo(this.editor,"destroy",e.cancel)}find(e){const{editor:t}=this,{model:r}=t,{findCallback:i,results:n}=t.execute("find",e);return this.activeResults=n,this.listenTo(r.document,"change:data",()=>function(e,t,r){const i=new Set,n=new Set;t.document.differ.getChanges().forEach(e=>{"$text"===e.name||t.schema.isInline(e.position.nodeAfter)?(i.add(e.position.parent),[...t.markers.getMarkersAtPosition(e.position)].forEach(e=>{n.add(e.name)})):"insert"===e.type&&i.add(e.position.nodeAfter)}),t.document.differ.getChangedMarkers().forEach(({name:e,data:{newRange:t}})=>{t&&"$graveyard"===t.start.root.rootName&&n.add(e)}),i.forEach(e=>{[...t.markers.getMarkersIntersectingRange(t.createRangeIn(e))].forEach(e=>n.add(e.name))}),t.change(t=>{n.forEach(r=>{e.has(r)&&e.remove(r),t.removeMarker(r)})}),i.forEach(i=>{N(t.createRangeOn(i),t,r,e)})}(this.activeResults,r,i)),this.activeResults}stop(){this.activeResults&&(this.stopListening(this.editor.model.document),this.state.clear(this.editor.model),this.activeResults=null)}_defineCommands(){this.editor.commands.add("find",new W(this.editor,this.state)),this.editor.commands.add("findNext",new H(this.editor,this.state)),this.editor.commands.add("findPrevious",new L(this.editor,this.state)),this.editor.commands.add("replace",new F(this.editor,this.state)),this.editor.commands.add("replaceAll",new D(this.editor,this.state))}_defineConverters(){const{editor:e}=this;e.conversion.for("editingDowncast").markerToHighlight({model:"findResult",view:({markerName:e})=>{const[,t]=e.split(":");return{name:"span",classes:["ck-find-result"],attributes:{"data-find-result":t}}}}),e.conversion.for("editingDowncast").markerToHighlight({model:"findResultHighlighted",view:({markerName:e})=>{const[,t]=e.split(":");return{name:"span",classes:["ck-find-result_selected"],attributes:{"data-find-result":t}}}})}}class Be extends i.Plugin{static get requires(){return[Ie,l]}static get pluginName(){return"FindAndReplace"}init(){const e=this.editor.plugins.get("FindAndReplaceUI"),t=this.editor.plugins.get("FindAndReplaceEditing");e.on("findNext",(e,r)=>{r?(t.state.searchText=r.searchText,this.editor.execute("find",r.searchText,r)):this.editor.execute("findNext")}),e.on("findPrevious",(e,r)=>{r&&t.state.searchText!==r.searchText?this.editor.execute("find",r.searchText):this.editor.execute("findPrevious")}),e.on("replace",(e,r)=>{t.state.searchText!==r.searchText&&this.editor.execute("find",r.searchText);const i=t.state.highlightedResult;i&&this.editor.execute("replace",r.replaceText,i)}),e.on("replaceAll",(e,r)=>{t.state.searchText!==r.searchText&&this.editor.execute("find",r.searchText),this.editor.execute("replaceAll",r.replaceText,t.state.results)}),e.on("dropdown:closed",()=>{t.state.clear(this.editor.model),t.stop()}),this.editor.ui&&this.listenTo(this.editor.ui,"ready",()=>{const t=e.formView;if(t){const e=this.editor.commands;t.findNextButtonView.bind("isEnabled").to(e.get("findNext"),"isEnabled"),t.findPrevButtonView.bind("isEnabled").to(e.get("findPrevious"),"isEnabled"),t.replaceButtonView.unbind("isEnabled"),t.replaceButtonView.bind("isEnabled").to(e.get("replace"),"isEnabled",t,"isSearching",(e,t)=>e&&t),t.replaceAllButtonView.unbind("isEnabled"),t.replaceAllButtonView.bind("isEnabled").to(e.get("replaceAll"),"isEnabled",t,"isSearching",(e,t)=>e&&t)}}),e._setState(t.state)}}}]);